<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Tracking Events</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>

    <style>
        body {
            background: #f7f7f7;
        }

        .table-container {
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
        }

        table {
            white-space: nowrap;
        }

        thead th {
            position: sticky;
            top: 0;
            background: #343a40;
            color: white;
            z-index: 10;
        }

        .full-page {
            min-height: 100vh;
        }
    </style>
</head>

<body class="full-page">

<div class="container-fluid table-container">

    <h3 class="text-center mb-3">ðŸ“Š User Activity Tracking</h3>

    <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover">

            <thead>
            <tr>
                <th>ID</th>
                <th>IP</th>
                <th>Browser</th>
                <th>Browser Version</th>
                <th>User Agent</th>
                <th>OS</th>
                <th>Platform</th>
                <th>Device</th>
                <th>Language</th>
                <th>Timezone</th>
                <th>Screen</th>
                <th>Viewport</th>
                <th>Color Depth</th>
                <th>Touch</th>
                <th>Connection</th>
                <th>Downlink</th>
                <th>RTT</th>
                <th>Page URL</th>
                <th>Event Type</th>
                <th>Created At</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="event : ${events}">
                <td th:text="${event.id}"></td>
                <td th:text="${event.ipAddress}"></td>
                <td th:text="${event.browser}"></td>
                <td th:text="${event.browserVersion}"></td>
                <td th:text="${event.userAgent}"></td>
                <td th:text="${event.os}"></td>
                <td th:text="${event.platform}"></td>
                <td th:text="${event.deviceType}"></td>
                <td th:text="${event.language}"></td>
                <td th:text="${event.timezone}"></td>
                <td th:text="${event.screenResolution}"></td>
                <td th:text="${event.viewport}"></td>
                <td th:text="${event.colorDepth}"></td>
                <td th:text="${event.touchSupport}"></td>
                <td th:text="${event.connectionType}"></td>
                <td th:text="${event.downlink}"></td>
                <td th:text="${event.rtt}"></td>
                <td th:text="${event.pageUrl}"></td>
                <td th:text="${event.eventType}"></td>
                <td th:text="${event.createdAt}"></td>	
   		        <td th:text="${#temporals.format(event.createdAt, 'dd MMM yyyy, hh:mm a')}"></td>
 
            </tr>
            </tbody>

        </table>
    </div>

    <!-- PAGINATION -->
	<!-- PAGINATION -->
	<nav th:if="${totalPages > 1}" aria-label="Page navigation" class="mt-3">
	    <ul class="pagination justify-content-center">

	        <!-- Previous -->
	        <li class="page-item"
	            th:classappend="${currentPage == 0} ? 'disabled'">
	            <a class="page-link"
	               th:href="@{/events/list(page=${currentPage - 1}, size=10)}">
	                Previous
	            </a>
	        </li>

	        <!-- Page Numbers -->
	        <li class="page-item"
	            th:each="i : ${#numbers.sequence(0, totalPages-1)}"
	            th:classappend="${i == currentPage} ? 'active'">
	            <a class="page-link"
	               th:text="${i + 1}"
	               th:href="@{/events/list(page=${i}, size=10)}">
	            </a>
	        </li>

	        <!-- Next -->
	        <li class="page-item"
	            th:classappend="${currentPage + 1 == totalPages} ? 'disabled'">
	            <a class="page-link"
	               th:href="@{/events/list(page=${currentPage + 1}, size=10)}">
	                Next
	            </a>
	        </li>

	    </ul>
	</nav>


</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
